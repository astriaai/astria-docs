"use strict";(self.webpackChunkastria_docs_2=self.webpackChunkastria_docs_2||[]).push([[5156],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>g});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var p=a.createContext({}),s=function(t){var e=a.useContext(p),n=e;return t&&(n="function"==typeof t?t(e):o(o({},e),t)),n},u=function(t){var e=s(t.components);return a.createElement(p.Provider,{value:e},t.children)},c="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,i=t.originalType,p=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),c=s(n),m=r,g=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return n?a.createElement(g,o(o({ref:e},u),{},{components:n})):a.createElement(g,o({ref:e},u))}));function g(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var p in e)hasOwnProperty.call(e,p)&&(l[p]=e[p]);l.originalType=t,l[c]="string"==typeof t?t:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(t,e,n)=>{n.d(e,{Z:()=>o});var a=n(7294),r=n(6010);const i={tabItem:"tabItem_Ymn6"};function o(t){let{children:e,hidden:n,className:o}=t;return a.createElement("div",{role:"tabpanel",className:(0,r.Z)(i.tabItem,o),hidden:n},e)}},4866:(t,e,n)=>{n.d(e,{Z:()=>y});var a=n(7462),r=n(7294),i=n(6010),o=n(2466),l=n(6550),p=n(1980),s=n(7392),u=n(12);function c(t){return function(t){return r.Children.map(t,(t=>{if(!t||(0,r.isValidElement)(t)&&function(t){const{props:e}=t;return!!e&&"object"==typeof e&&"value"in e}(t))return t;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof t.type?t.type:t.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(t).map((t=>{let{props:{value:e,label:n,attributes:a,default:r}}=t;return{value:e,label:n,attributes:a,default:r}}))}function d(t){const{values:e,children:n}=t;return(0,r.useMemo)((()=>{const t=e??c(n);return function(t){const e=(0,s.l)(t,((t,e)=>t.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((t=>t.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(t),t}),[e,n])}function m(t){let{value:e,tabValues:n}=t;return n.some((t=>t.value===e))}function g(t){let{queryString:e=!1,groupId:n}=t;const a=(0,l.k6)(),i=function(t){let{queryString:e=!1,groupId:n}=t;if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,p._X)(i),(0,r.useCallback)((t=>{if(!i)return;const e=new URLSearchParams(a.location.search);e.set(i,t),a.replace({...a.location,search:e.toString()})}),[i,a])]}function h(t){const{defaultValue:e,queryString:n=!1,groupId:a}=t,i=d(t),[o,l]=(0,r.useState)((()=>function(t){let{defaultValue:e,tabValues:n}=t;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((t=>t.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find((t=>t.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:e,tabValues:i}))),[p,s]=g({queryString:n,groupId:a}),[c,h]=function(t){let{groupId:e}=t;const n=function(t){return t?`docusaurus.tab.${t}`:null}(e),[a,i]=(0,u.Nk)(n);return[a,(0,r.useCallback)((t=>{n&&i.set(t)}),[n,i])]}({groupId:a}),f=(()=>{const t=p??c;return m({value:t,tabValues:i})?t:null})();(0,r.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:o,selectValue:(0,r.useCallback)((t=>{if(!m({value:t,tabValues:i}))throw new Error(`Can't select invalid tab value=${t}`);l(t),s(t),h(t)}),[s,h,i]),tabValues:i}}var f=n(2389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function _(t){let{className:e,block:n,selectedValue:l,selectValue:p,tabValues:s}=t;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.o5)(),d=t=>{const e=t.currentTarget,n=u.indexOf(e),a=s[n].value;a!==l&&(c(e),p(a))},m=t=>{let e=null;switch(t.key){case"Enter":d(t);break;case"ArrowRight":{const n=u.indexOf(t.currentTarget)+1;e=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(t.currentTarget)-1;e=u[n]??u[u.length-1];break}}e?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":n},e)},s.map((t=>{let{value:e,label:n,attributes:o}=t;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,key:e,ref:t=>u.push(t),onKeyDown:m,onClick:d},o,{className:(0,i.Z)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":l===e})}),n??e)})))}function k(t){let{lazy:e,children:n,selectedValue:a}=t;const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const t=i.find((t=>t.props.value===a));return t?(0,r.cloneElement)(t,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},i.map(((t,e)=>(0,r.cloneElement)(t,{key:e,hidden:t.props.value!==a}))))}function v(t){const e=h(t);return r.createElement("div",{className:(0,i.Z)("tabs-container",b.tabList)},r.createElement(_,(0,a.Z)({},t,e)),r.createElement(k,(0,a.Z)({},t,e)))}function y(t){const e=(0,f.Z)();return r.createElement(v,(0,a.Z)({key:String(e)},t))}},3026:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>p,default:()=>g,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905)),i=n(4866),o=n(5162);const l={title:"Flux Outpainting",description:"LoRA",tags:["Outpainting","cinematic","virtual try-on"],hide_table_of_contents:!0,image:"./img/outpaint/outpaint2-out-16-9.jpg"},p="Outpainting",s={unversionedId:"features/outpainting",id:"features/outpainting",title:"Flux Outpainting",description:"LoRA",source:"@site/docs/features/outpainting.md",sourceDirName:"features",slug:"/features/outpainting",permalink:"/docs/features/outpainting",draft:!1,tags:[{label:"Outpainting",permalink:"/docs/tags/outpainting"},{label:"cinematic",permalink:"/docs/tags/cinematic"},{label:"virtual try-on",permalink:"/docs/tags/virtual-try-on"}],version:"current",frontMatter:{title:"Flux Outpainting",description:"LoRA",tags:["Outpainting","cinematic","virtual try-on"],hide_table_of_contents:!0,image:"./img/outpaint/outpaint2-out-16-9.jpg"},sidebar:"tutorialSidebar",previous:{title:"Multi-LoRA / Multi-Person",permalink:"/docs/features/multiperson"},next:{title:"Prompt Masking",permalink:"/docs/features/prompt-masking"}},u={image:n(3301).Z},c=[{value:"Outpainting only",id:"outpainting-only",level:3},{value:"txt2img + Outpainting",id:"txt2img--outpainting",level:3},{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Examples",id:"examples",level:2},{value:"API Usage",id:"api-usage",level:2},{value:"POST /tunes/1504944/prompts",id:"post-tunes1504944prompts",level:4}],d={toc:c},m="wrapper";function g(t){let{components:e,...l}=t;return(0,r.kt)(m,(0,a.Z)({},d,l,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"outpainting"},"Outpainting"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," For flux ")),(0,r.kt)("h3",{id:"outpainting-only"},"Outpainting only"),(0,r.kt)("div",{style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"1.5rem"}},(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"Input"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"outpainting for VTON",src:n(7098).Z,width:"576",height:"864"}))),(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"Outpainting only - no txt2img"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Outpainting VTON result",src:n(6447).Z,width:"1728",height:"2592"})))),(0,r.kt)("h3",{id:"txt2img--outpainting"},"txt2img + Outpainting"),(0,r.kt)("div",{style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"1.5rem"}},(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"Txt2img only 1:1 (1024x1024)"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"outpainting for VTON",src:n(5992).Z,width:"1024",height:"1024"}))),(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"txt2img + outpaint to 9:16"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Outpainting with txt2img result",src:n(4116).Z,width:"1024",height:"1792"})))),(0,r.kt)("div",{style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"1.5rem"}},(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"txt2img + outpaint 16:9"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"outpainting for VTON",src:n(3301).Z,width:"1792",height:"1024"}))),(0,r.kt)("div",null,(0,r.kt)("figcaption",null,"txt2img + outpaint 16:9"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Outpainting with txt2img result",src:n(7150).Z,width:"1792",height:"1024"})))),(0,r.kt)("p",null,"See outpaint examples in the ",(0,r.kt)("a",{parentName:"p",href:"https://www.astria.ai/gallery?text=outpaint"},"gallery")),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Outpainting is a technique used to extend an image to bring in more context and background into the initally generated subject of the image. Examples for usage could be taking a 1:1 aspect-ratio (1024x1024) and extending it into a 16:9 cinematic view, or taking a waist up portrait 1:1 and extending it into a full body portrait 9:16. One of the advantages of this is better preservation of the face identity, as well as the ability of the model on focusing on the background generation due to it being separated into a separate task."),(0,r.kt)("p",null,"See ",(0,r.kt)("a",{parentName:"p",href:"https://www.astria.ai/pricing"},"pricing")," for the cost of this feature."),(0,r.kt)("div",{className:"api-method"},(0,r.kt)("div",null,(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"Below are the arguments that should be added at the end of the prompt text to enable outpainting:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"--outpaint")," - The anchor for outpainting. Options: ",(0,r.kt)("inlineCode",{parentName:"li"},"top-left, top-right, bottom-left, bottom-right, center, top-center, bottom-center, left-center, right-center")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"--outpaint_height")," "),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"--outpaint_width"),"  "),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"--outpaint_prompt")," - Optional")),(0,r.kt)("p",null,"In case you're interested in setting an input image and doing only outpainting, and skipping the txt2img/img2img step, make sure to set ",(0,r.kt)("inlineCode",{parentName:"p"},"denoising_strength: 0")),(0,r.kt)("h2",{id:"examples"},"Examples"),(0,r.kt)("p",null,"Outpaint only"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},"--outpaint top-center --outpaint_width 864 --outpaint_height 1296\nnum_images=1\nnegative_prompt=\nseed=\nsteps=\ncfg_scale=\ncontrolnet=\ninput_image_url=https://sdbooth2-production.s3.amazonaws.com/qg202t8sqfn1olewuzdujgaq29si\nmask_image_url=\ndenoising_strength=0\ncontrolnet_conditioning_scale=\ncontrolnet_txt2img=false\nsuper_resolution=true\ninpaint_faces=false\nface_correct=false\nfilm_grain=false\nface_swap=false\nhires_fix=false\nbackend_version=0\nar=1:1\nscheduler=euler_a\ncolor_grading=\nuse_lpw=true\nw=576\nh=864\n")),(0,r.kt)("p",null,"txt2img + outpainting"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'<lora:1533312:1.0> ohwx woman, dressed in cozy peach sweater, shoulders up, depth of field --outpaint top-center --outpaint_width 1792 --outpaint_height 1024 --outpaint_prompt "fields"\nnum_images=1\nnegative_prompt=\nseed=\nsteps=\ncfg_scale=\ncontrolnet=\ninput_image_url=\nmask_image_url=\ndenoising_strength=\ncontrolnet_conditioning_scale=\ncontrolnet_txt2img=false\nsuper_resolution=false\ninpaint_faces=false\nface_correct=false\nfilm_grain=false\nface_swap=false\nhires_fix=false\nbackend_version=0\nar=1:1\nscheduler=euler_a\ncolor_grading=\nuse_lpw=false\nw=1024\nh=1024\n')),(0,r.kt)("p",null,"txt2img + multi-person outpainting"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-text"},'<lora:1533312:1.0> ohwx woman, dressed in cozy peach sweater, shoulders up, depth of field --outpaint left-center --outpaint_width 1792 --outpaint_height 1024 --outpaint_prompt "president Trump the middle of the field"\nnum_images=1\nnegative_prompt=\nseed=\nsteps=\ncfg_scale=\ncontrolnet=\ninput_image_url=\nmask_image_url=\ndenoising_strength=\ncontrolnet_conditioning_scale=\ncontrolnet_txt2img=false\nsuper_resolution=false\ninpaint_faces=false\nface_correct=false\nfilm_grain=false\nface_swap=false\nhires_fix=false\nbackend_version=0\nar=1:1\nscheduler=euler_a\ncolor_grading=\nuse_lpw=false\nw=1024\nh=1024\n'))),(0,r.kt)("div",null,(0,r.kt)("h2",{id:"api-usage"},"API Usage"),(0,r.kt)("h4",{id:"post-tunes1504944prompts"},"POST /tunes/1504944/prompts"),(0,r.kt)(i.Z,{groupId:"lang",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"curl",label:"cURL",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},'# Note the hard-coded 1504944 which is the tune_id of Flux1.dev from the gallery\n# Outpaint only example\ncurl -X POST -H "Authorization: Bearer $API_KEY" https://api.astria.ai/tunes/1504944/prompts \\\n          -F prompt[text]="--outpaint top-center --outpaint_width 864 --outpaint_height 1296" \\\n          -F prompt[denoising_strength]=0 \\\n          -F prompt[input_image_url]="https://sdbooth2-production.s3.amazonaws.com/qg202t8sqfn1olewuzdujgaq29si" \\\n          -F prompt[callback]="https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1"\n          \n# txt2img + outpainting example \ncurl -X POST -H "Authorization: Bearer $API_KEY" https://api.astria.ai/tunes/1504944/prompts \\\n          -F prompt[text]=\'<lora:1533312:1.0> ohwx woman, dressed in cozy peach sweater, shoulders up, depth of field --outpaint top-center --outpaint_width 1792 --outpaint_height 1024 --outpaint_prompt "fields"\' \\\n          -F prompt[w]=1024 \\\n          -F prompt[h]=1024 \\\n          -F prompt[callback]="https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1"\n'))),(0,r.kt)(o.Z,{value:"javascript",label:"Node.js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const fetch = require('node-fetch');\nconst FormData = require('form-data');\n\n// Note the hard-coded 1504944 which is the tune_id of Flux1.dev from the gallery\nconst API_URL = 'https://api.astria.ai/tunes/1504944/prompts';\nconst API_KEY = 'YOUR_API_KEY'; // Replace with your actual API key\nconst headers = { Authorization: `Bearer ${API_KEY}` }\n\nconst form = new FormData();\nform.append('prompt[text]', '--outpaint top-center --outpaint_width 864 --outpaint_height 1296');\nform.append('prompt[input_image_url]', 'https://sdbooth2-production.s3.amazonaws.com/qg202t8sqfn1olewuzdujgaq29si');\n// Alternatively use prompt[input_image]\n// form.append('prompt[input_image]', fs.createReadStream(`./input-image.png`));\nform.append('prompt[denoising_strength]', 0);\nform.append('prompt[callback]', 'https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1');\n\nfetch(API_URL, {\n  method: 'POST',\n  headers: headers,\n  body: form\n}).then(response => response.json())\n\n\n// txt2img + outpainting example\nconst form = new FormData();\nform.append('prompt[text]', '<lora:1533312:1.0> ohwx woman, dressed in cozy peach sweater, shoulders up, depth of field --outpaint top-center --outpaint_width 1792 --outpaint_height 1024 --outpaint_prompt \"fields\"');\nform.append('prompt[w]', 1024);\nform.append('prompt[h]', 1024);\nform.append('prompt[callback]', 'https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1');\n\n"))),(0,r.kt)(o.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"import requests\n\n# Note the hard-coded 1504944 which is the tune_id of Flux1.dev from the gallery\nAPI_URL = 'https://api.astria.ai/tunes/1504944/prompts'\nAPI_KEY = 'YOUR_API_KEY'  # Replace with your actual API key\n\nheaders = {\n    'Authorization': f'Bearer {API_KEY}'\n}\n\ndata = {\n  'prompt[text]': '--outpaint top-center --outpaint_width 864 --outpaint_height 1296',\n  'prompt[denoising_strength]': 0,\n  'prompt[callback]': 'https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1'\n}\nfiles = []\nfiles.append((f\"tune[prompts_attributes][{i}][input_image]\", load_image(prompt['input_image'])))\n\nresponse = requests.post(API_URL, headers=headers, data=data)\n\n# txt2img + outpainting example\ndata = {\n  'prompt[text]': '<lora:1533312:1.0> ohwx woman, dressed in cozy peach sweater, shoulders up, depth of field --outpaint top-center --outpaint_width 1792 --outpaint_height 1024 --outpaint_prompt \"fields\"',\n  'prompt[w]': 1024,\n  'prompt[h]': 1024,\n  'prompt[callback]': 'https://optional-callback-url.com/to-your-service-when-ready?prompt_id=1'\n}\nresponse = requests.post(API_URL, headers=headers, data=data)\n")))))))}g.isMDXComponent=!0},7098:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint1-input-b5d163b9792b9504bdda840576fc9d8f.png"},6447:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint1-out-d2b73ae432b23ddc64a3e564581b87d8.jpg"},5992:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint2-input-e7390c2fc24213b0acd02ec81e86e912.jpg"},3301:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint2-out-16-9-c61b36455bca3e5539434aaea55f9163.jpg"},4116:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint2-out-9-16-467aae6e40fa6043ff6efecdda6190cb.jpg"},7150:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/outpaint2-out-multi-person-d01b5eb044ee4469b18c3e234f27af8e.jpg"}}]);